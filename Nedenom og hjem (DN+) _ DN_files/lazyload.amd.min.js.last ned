define(function(){"use strict";function n(){return(n=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t}).apply(this,arguments)}var r="undefined"!=typeof window,o=r&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),l=r&&"IntersectionObserver"in window,e=r&&"classList"in document.createElement("p"),g=r&&1<window.devicePixelRatio,a={elements_selector:".lazy",container:o||r?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1},c=function(t){return n({},a,t)},i=function(t,n){var e,a="LazyLoad::Initialized",i=new t(n);try{e=new CustomEvent(a,{detail:{instance:i}})}catch(t){(e=document.createEvent("CustomEvent")).initCustomEvent(a,!1,!1,{instance:i})}window.dispatchEvent(e)},s="loading",u="loaded",d="applied",f="error",_="native",v="data-",b="ll-status",p=function(t,n){return t.getAttribute(v+n)},h=function(t,n,e){var a=v+n;null!==e?t.setAttribute(a,e):t.removeAttribute(a)},m=function(t){return p(t,b)},E=function(t,n){return h(t,b,n)},I=function(t){return E(t,null)},A=function(t){return null===m(t)},w=function(t){return m(t)===_},L=[s,u,d,f],k=function(t,n,e,a){t&&(void 0===a?void 0===e?t(n):t(n,e):t(n,e,a))},y=function(t,n){e?t.classList.add(n):t.className+=(t.className?" ":"")+n},O=function(t,n){e?t.classList.remove(n):t.className=t.className.replace(new RegExp("(^|\\s+)"+n+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},z=function(t){return t.llTempImage},C=function(t,n){if(n){var e=n._observer;e&&e.unobserve(t)}},N=function(t,n){t&&(t.loadingCount+=n)},M=function(t,n){t&&(t.toLoadCount=n)},x=function(t){for(var n,e=[],a=0;n=t.children[a];a+=1)"SOURCE"===n.tagName&&e.push(n);return e},R=function(t,n,e){e&&t.setAttribute(n,e)},G=function(t,n){t.removeAttribute(n)},T=function(t){return!!t.llOriginalAttrs},D=function(t){if(!T(t)){var n={};n.src=t.getAttribute("src"),n.srcset=t.getAttribute("srcset"),n.sizes=t.getAttribute("sizes"),t.llOriginalAttrs=n}},F=function(t){if(T(t)){var n=t.llOriginalAttrs;R(t,"src",n.src),R(t,"srcset",n.srcset),R(t,"sizes",n.sizes)}},V=function(t,n){R(t,"sizes",p(t,n.data_sizes)),R(t,"srcset",p(t,n.data_srcset)),R(t,"src",p(t,n.data_src))},P=function(t){G(t,"src"),G(t,"srcset"),G(t,"sizes")},S=function(t,n){var e=t.parentNode;e&&"PICTURE"===e.tagName&&x(e).forEach(n)},j=function(t,n){x(t).forEach(n)},U={IMG:function(t,n){S(t,function(t){D(t),V(t,n)}),D(t),V(t,n)},IFRAME:function(t,n){R(t,"src",p(t,n.data_src))},VIDEO:function(t,n){j(t,function(t){R(t,"src",p(t,n.data_src))}),R(t,"poster",p(t,n.data_poster)),R(t,"src",p(t,n.data_src)),t.load()}},$=function(t,n){var e=U[t.tagName];e&&e(t,n)},q=function(t,n,e){y(t,n.class_applied),E(t,d),J(t,n),n.unobserve_completed&&C(t,n),k(n.callback_applied,t,e)},H=function(t,n,e){N(e,1),y(t,n.class_loading),E(t,s),k(n.callback_loading,t,e)},B={IMG:function(t,n){h(t,n.data_src,null),h(t,n.data_srcset,null),h(t,n.data_sizes,null),S(t,function(t){h(t,n.data_srcset,null),h(t,n.data_sizes,null)})},IFRAME:function(t,n){h(t,n.data_src,null)},VIDEO:function(t,n){h(t,n.data_src,null),h(t,n.data_poster,null),j(t,function(t){h(t,n.data_src,null)})}},J=function(t,n){h(t,n.data_bg_multi,null),h(t,n.data_bg_multi_hidpi,null)},K=function(t,n){var e,a,i=B[t.tagName];i?i(t,n):(h(e=t,(a=n).data_bg,null),h(e,a.data_bg_hidpi,null))},Q=["IMG","IFRAME","VIDEO"],W=function(t,n){!n||0<n.loadingCount||0<n.toLoadCount||k(t.callback_finish,n)},X=function(t,n,e){t.addEventListener(n,e),t.llEvLisnrs[n]=e},Y=function(t){return!!t.llEvLisnrs},Z=function(t){if(Y(t)){var n,e,a=t.llEvLisnrs;for(var i in a){var r=a[i];n=i,e=r,t.removeEventListener(n,e)}delete t.llEvLisnrs}},tt=function(t,n,e){var a;delete t.llTempImage,N(e,-1),(a=e)&&(a.toLoadCount-=1),O(t,n.class_loading),n.unobserve_completed&&C(t,e)},nt=function(r,o,l){var c=z(r)||r;if(!Y(c)){!function(t,n,e){Y(t)||(t.llEvLisnrs={});var a="VIDEO"===t.tagName?"loadeddata":"load";X(t,a,n),X(t,"error",e)}(c,function(t){var n,e,a,i;e=o,a=l,i=w(n=r),tt(n,e,a),y(n,e.class_loaded),E(n,u),K(n,e),k(e.callback_loaded,n,a),i||W(e,a),Z(c)},function(t){var n,e,a,i;e=o,a=l,i=w(n=r),tt(n,e,a),y(n,e.class_error),E(n,f),k(e.callback_error,n,a),i||W(e,a),Z(c)})}},et=function(t,n,e){var a,i,r,o,l,c,s,u,d,f,_,v;t.llTempImage=document.createElement("IMG"),nt(t,n,e),r=e,o=p(a=t,(i=n).data_bg),l=p(a,i.data_bg_hidpi),(c=g&&l?l:o)&&(a.style.backgroundImage='url("'.concat(c,'")'),z(a).setAttribute("src",c),H(a,i,r)),d=e,f=p(s=t,(u=n).data_bg_multi),_=p(s,u.data_bg_multi_hidpi),(v=g&&_?_:f)&&(s.style.backgroundImage=v,q(s,u,d))},at=function(t,n,e){var a,i,r,o;o=t,-1<Q.indexOf(o.tagName)?(nt(a=t,i=n,r=e),$(a,i),H(a,i,r)):et(t,n,e)},it=function(t,n,e,a){var i,r;e.cancel_on_exit&&(m(t)===s&&"IMG"===t.tagName&&(Z(t),S(i=t,function(t){P(t)}),P(i),S(r=t,function(t){F(t)}),F(r),O(t,e.class_loading),N(a,-1),I(t),k(e.callback_cancel,t,n,a)))},rt=function(t,n,e,a){var i,r,o;(E(t,"entered"),i=t,r=a,e.unobserve_entered&&C(i,r),k(e.callback_enter,t,n,a),o=t,0<=L.indexOf(m(o)))||at(t,e,a)},ot=["IMG","IFRAME"],lt=function(t){return t.use_native&&"loading"in HTMLImageElement.prototype},ct=function(t,a,i){t.forEach(function(t){var n,e;-1!==ot.indexOf(t.tagName)&&(t.setAttribute("loading","lazy"),nt(n=t,e=a,i),$(n,e),K(n,e),E(n,_))}),M(i,0)},st=function(t,o,l){t.forEach(function(t){return(r=t).isIntersecting||0<r.intersectionRatio?rt(t.target,t,o,l):(n=t.target,e=t,a=o,i=l,void(A(n)||(it(n,e,a,i),k(a.callback_exit,n,e,i))));var n,e,a,i,r})},ut=function(n,e){var t;l&&!lt(n)&&(e._observer=new IntersectionObserver(function(t){st(t,n,e)},{root:(t=n).container===document?null:t.container,rootMargin:t.thresholds||t.threshold+"px"}))},dt=function(t){return Array.prototype.slice.call(t)},ft=function(t){return t.container.querySelectorAll(t.elements_selector)},_t=function(t){return m(t)===f},vt=function(t,n){return e=t||ft(n),dt(e).filter(A);var e},gt=function(n,t){var e;(e=ft(n),dt(e).filter(_t)).forEach(function(t){O(t,n.class_error),I(t)}),t.update()},t=function(t,n){var e,a,i=c(t);this._settings=i,this.loadingCount=0,ut(i,this),e=i,a=this,r&&window.addEventListener("online",function(){gt(e,a)}),this.update(n)};return t.prototype={update:function(t){var n,e,a,i=this._settings,r=vt(t,i);(M(this,r.length),!o&&l)?lt(i)?ct(r,i,this):(n=this._observer,e=r,n.disconnect(),a=n,e.forEach(function(t){a.observe(t)})):this.loadAll(r)},destroy:function(){this._observer&&this._observer.disconnect(),ft(this._settings).forEach(function(t){delete t.llOriginalAttrs}),delete this._observer,delete this._settings,delete this.loadingCount,delete this.toLoadCount},loadAll:function(t){var n=this,e=this._settings;vt(t,e).forEach(function(t){C(t,n),at(t,e,n)})}},t.load=function(t,n){var e=c(n);at(t,e)},t.resetStatus=function(t){I(t)},r&&function(t,n){if(n)if(n.length)for(var e,a=0;e=n[a];a+=1)i(t,e);else i(t,n)}(t,window.lazyLoadOptions),t});
//# sourceMappingURL=lazyload.amd.min.js.map